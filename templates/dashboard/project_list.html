{% extends "base.html" %}{% load dashboard_filters %}

{% block header %}
{% ifequal from_datetime|date:"m/d/y" to_datetime|date:"m/d/y"  %}
<h2>Data for {{ from_datetime|date:"m/d/y" }} [{{ from_datetime|timesince }} ago]</h2>
{% else %}
<h2>From&nbsp;{{ from_datetime|date:"m/d/y" }} To&nbsp;{{ to_datetime|date:"m/d/y" }}</h2>
{% endifequal %}
{% endblock header %}

{% block content %}
    <table id="analytics">
        <colgroup span="1" class="titles">
        <colgroup span="6">
        <colgroup span="1" class="lists">
        <thead>
            <tr>
                <th><span>Name</span></th>{% for u in ordered_units %}
                <th><span>{{ u.unit.name }}</span></th>{% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for object in object_list %}
            <tr id="{{ object.project.slug }}" class="primary">
                <th scope=row>{{ object.project.name }}</th>{% for o in object.observations %}
                <td class='{{ o.metric.unit.slug }} {{ o.metric.observation_type.model }}'>{% ifequal o.metric.unit.observation_type.model "listobservation" %}
                    <ol>{% for item in o.listobservation.value|slice:':5' %}
                        <li>{{ item.name|urlizetrunc:25 }} <em>{{ item.value }}</em></li>{% endfor %}
                    </ol>{% endifequal %}
                    {% ifequal o.metric.unit.observation_type.model "ratioobservation" %}
                        {% ifequal o.ratioobservation.antecedent.metric.unit.observation_unit "seconds" %}
                    <p>{{ o.ratioobservation.value|secondstoduration }}</p>
                        {% else %}
                    <p>{{ o.ratioobservation.value|floatformat }}</p>{% endifequal %}
                    {% else %}
                        {% ifequal o.metric.unit.observation_unit "seconds" %}
                    <p>{{ o.countobservation.value|secondstoduration }}</p>
                        {% else %}
                    <p>{{ o.countobservation.value|floatformat }}</p>{% endifequal %}
                        {% endifequal %}
                </td>{% endfor %}
            </tr>
            <tr class="secondary first">
                <td></td>
                <th colspan=2 scope=row>Number of Searches</th><td colspan=5>100</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block js %}
    <script src="{{ STATIC_URL }}js/script.js"></script>
{% endblock %}